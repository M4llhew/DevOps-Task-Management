<!-- templates/base.html -->
{% load static %}
<html>
<head>
    <meta charset="utf-8">
    <title>{% block title %}Django Auth Tutorial{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>

<body class="inter inline-row">
<nav>
    <div class="sidebar-container large-bar">
        <div class="sidebar-expanded inline-column">
            <div class="header inline-row primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
                <a href="index.html" class="primary">Mattnobc</a>
            </div>
            <div class="navigation inline-column">
                <a href="login.html" class="option inline-row colourful">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-home">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    <p>overview</p>
                </a>
                <a href="project.html" class="option inline-row secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-folder">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z">
                        </path>
                    </svg>
                    <p>projects</p>
                </a>
                <a href="areas.html" class="option inline-row secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-book-open">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    <p>areas</p>
                </a>
                <a href="calendar.html" class="option inline-row secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-calendar">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <p>calendar</p>
                </a>


                <a href="settings.html" class="option inline-row secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-settings">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                    <p>settings</p>
                </a>
            </div>
            <div class="profile">
                <div class="container inline-row">
                    <img width="45" height="45">
                    <div class="userinfo inline-column">
                        <p class="name secondary">matthew noble</p>
                        <p class="job tertiary">software engineer</p>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-log-out">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </div>
            </div>
        </div>

        <div class="sidebar-collapsed inline-column translate-x">
            <div class="header">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-menu">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </div>
            <div class="navigation inline-column">
                <a href="index.html" class="icon-button colourful">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-home">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </a>
                <a href="project.html" class="icon-button secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-folder">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z">
                        </path>
                    </svg>
                </a>
                <a href="areas.html" class="icon-button secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-book-open">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                </a>
                <a href="calendar.html" class="icon-button secondary"></a>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-calendar">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                </a>

                <a href="settings.html" class="icon-button secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-settings">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </a>
            </div>
            <div class="profile inline-column">
                <img width="45" height="45">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-log-out">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
            </div>
        </div>
    </div>
</nav>
<main>
    {% block content %}
    {% endblock %}
</main>

<script>
        function validateTask() {
            console.log("validated")
            console.log("task creation")
            const task_container = document.querySelector('main .create-task')
        }


        function createTask() {
            console.log("task creation")
            const task_container = document.querySelector('main .create-task')
            const create_btn = document.querySelector('main header .advanced .container .right-side .create')


            task_container.classList.toggle('hide')
            create_btn.classList.toggle('colourful')
            create_btn.classList.toggle('active-button')

        }

        document.addEventListener('DOMContentLoaded', function () {






            const expandedSidebar = document.querySelector('.sidebar-expanded');
            const collapsedSidebar = document.querySelector('.sidebar-collapsed');
            const SidebarContainer = document.querySelector('.sidebar-container');

            // Function to toggle between expanded and collapsed sidebars
            function toggleSidebar() {
                console.log('Toggle Sidebar called'); // Check if this log appears in the console
                expandedSidebar.classList.toggle('translate-x');
                collapsedSidebar.classList.toggle('translate-x');
                // SidebarContainer.classList.toggle('move-bar');
                SidebarContainer.classList.toggle('large-bar');
                SidebarContainer.classList.toggle('small-bar');
            }

            // Add click event listener to the menu button or any other element triggering the toggle
            const menuButton = document.querySelector('.header svg.feather-menu');
            const closeButton = document.querySelector('.header svg.feather-x')
            menuButton.addEventListener('click', toggleSidebar);
            closeButton.addEventListener('click', toggleSidebar);

            const currentDate = new Date()
            console.log(currentDate)
            const currentDateElement = document.querySelector('.date-selector p')
            currentDateElement.innerText = getMondayDate(currentDate)
            updateDateHeaders(currentDate)
            console.log(currentDate, "date")

            const prevMonth = document.querySelector('.prev-month')
            const prevWeek = document.querySelector('.prev-week')
            const nextWeek = document.querySelector('.next-week')
            const nextMonth = document.querySelector('.next-month')

            prevMonth.addEventListener('click', function () {
                currentDate.setMonth(currentDate.getMonth() - 1)
                updateText(currentDate)
            })

            prevWeek.addEventListener('click', function () {
                currentDate.setDate(currentDate.getDate() - 7)
                updateText(currentDate)
            })

            nextWeek.addEventListener('click', function () {
                currentDate.setDate(currentDate.getDate() + 7)
                updateText(currentDate)
            })

            nextMonth.addEventListener('click', function () {
                currentDate.setMonth(currentDate.getMonth() + 1)
                updateText(currentDate)
            })

            function updateText(currentDate) {
                currentDateElement.innerText = getMondayDate(currentDate)
                updateDateHeaders(currentDate)
            }

            function getMondayDate(today) {
                const dayOfWeek = today.getDay();
                const diff = today.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1);
                const monday = new Date(today.setDate(diff));
                console.log({
                    "day": diff,
                    "monday": monday
                })
                const options = { day: 'numeric', year: 'numeric', month: 'long' };
                const formattedMonday = monday.toLocaleDateString('en-GB', options);
                console.log(formattedMonday, "formatted")
                return formattedMonday;
            }

            function setFirstDayOfMonth(today) {
                today.setDate(1);
                const options = { day: 'numeric', year: 'numeric', month: 'long' };
                const firstOfMonthFormatted = today.toLocaleDateString('en-GB', options);
                return firstOfMonthFormatted
            }

            function updateDateHeaders(targetDate) {
                const date = new Date(targetDate)
                const today = new Date()
                const weekHeaders = [
                    document.querySelector(".monday-header"),
                    document.querySelector(".tuesday-header"),
                    document.querySelector(".wednesday-header"),
                    document.querySelector(".thursday-header"),
                    document.querySelector(".friday-header"),
                    document.querySelector(".saturday-header"),
                    document.querySelector(".sunday-header")
                ]

                for (let i = 0; i < 7; i++) {

                    const formattedDate = new Intl.DateTimeFormat('en-GB', {
                        weekday: 'long',
                    }).format(date) + ' ' + formatDayWithSuffix(date);

                    console.log(today.toDateString(), "=", date.toDateString())

                    if (today.toDateString() == date.toDateString()) {
                        console.log("true")
                        weekHeaders[i].classList.add("today")
                    } else {
                        weekHeaders[i].classList.remove("today")
                    }

                    weekHeaders[i].innerText = formattedDate;
                    date.setDate(date.getDate() + 1);
                }
            }

            function formatDayWithSuffix(date) {
                const day = date.getDate();
                const suffix = (day >= 11 && day <= 13) ? 'th' : ['st', 'nd', 'rd', 'th'][(day - 1) % 10] || 'th';
                return day + suffix;
            }
        });



        function toggleWeek() {
            console.log("Done")

            const button = document.querySelector(".view-button");

            const saturdayColumn = document.querySelector(".saturday-column");
            const sundayColumn = document.querySelector(".sunday-column");

            const saturdayHeader = document.querySelector(".saturday-header");
            const sundayHeader = document.querySelector(".sunday-header");

            button.classList.toggle("active-button")

            saturdayColumn.classList.toggle("hide");
            sundayColumn.classList.toggle("hide");

            saturdayHeader.classList.toggle("hide");
            sundayHeader.classList.toggle("hide");

        }


        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text/plain", event.target.id);
        }

        function drop(event) {
            event.preventDefault();
            const data = event.dataTransfer.getData("text/plain");
            const draggedElement = document.getElementById(data);
            const dropTarget = event.target;

            // Check if the drop target is a valid column
            if (dropTarget.classList.contains("column")) {
                dropTarget.appendChild(draggedElement);
            }
        }
    </script>
</body>

</html>